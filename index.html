<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VW do Brasil - Databricks</title>
  <link rel="icon" href="assets/vw-logo.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <nav class="nav">
    <span class="nav-brand"><img src="assets/vw-logo.png" alt="Volkswagen">VW do Brasil</span>
    <div class="nav-right">
      <button type="button" class="nav-benefit-btn" id="nav-benefit-btn" aria-label="Benefícios desta solução">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
      </button>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#dashboard" data-panel="dashboard" class="active">Visão de Mercado</a>
        </li>
        <li class="nav-item">
          <a href="#genie" data-panel="genie">Pergunte sobre o Tera</a>
        </li>
        <li class="nav-item">
          <a href="#motorista" data-panel="motorista">Visão do Motorista</a>
        </li>
        <li class="nav-item">
          <a href="#pac" data-panel="pac">Visão PAC</a>
        </li>
        <li class="nav-item">
          <a href="#centralizada" data-panel="centralizada">Visão Centralizada</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="otto-popup-overlay" id="otto-popup-overlay" role="dialog" aria-modal="true" aria-labelledby="otto-popup-title" aria-hidden="true">
    <div class="otto-popup">
      <div class="otto-popup-header">
        <img src="assets/otto-symbol.png" alt="Otto">
        <h3 id="otto-popup-title">Fala, Otto!</h3>
        <button type="button" class="otto-popup-clear" id="otto-popup-clear" aria-label="Limpar conversa">Limpar conversa</button>
        <button type="button" class="otto-popup-close" id="otto-popup-close" aria-label="Fechar">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="otto-chat-messages" id="otto-chat-messages"></div>
      <form class="otto-chat-form" id="otto-chat-form">
        <textarea class="otto-chat-input" id="otto-chat-input" placeholder="Pergunte sobre seu carro..." rows="1" maxlength="2000"></textarea>
        <button type="submit" class="otto-chat-send" id="otto-chat-send">Enviar</button>
      </form>
    </div>
  </div>

  <div class="benefit-popup-overlay" id="benefit-popup-overlay" role="dialog" aria-modal="true" aria-labelledby="benefit-popup-title" aria-hidden="true">
    <div class="benefit-popup">
      <div class="benefit-popup-header">
        <h3 id="benefit-popup-title">Benefícios desta solução</h3>
        <button type="button" class="benefit-popup-close" id="benefit-popup-close" aria-label="Fechar">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="benefit-popup-body" id="benefit-popup-body"></div>
    </div>
  </div>

  <div id="top-bar" class="top-bar">
    <p class="welcome-msg">Bem-vindo, <strong id="welcome-name">Nome da Pessoa</strong></p>
    <div class="driver-id-search">
      <label for="driver-id-input">ID do Motorista</label>
      <input type="text" id="driver-id-input" placeholder="Digite o ID do motorista para pesquisar na tabela" autocomplete="off">
      <button type="button" id="driver-search-btn" class="btn-search">Pesquisar</button>
    </div>
  </div>

  <main class="main">
    <section id="panel-dashboard" class="panel active">
      <iframe
        id="iframe-dashboard"
        src="https://fe-sandbox-leticia-demo-automobilistic-1.cloud.databricks.com/embed/dashboardsv3/01f10ba524f812a89e46d866f761bbe3?o=7474651027276549"
        title="Databricks Dashboard"
        width="100%"
        height="600"
        frameborder="0">
      </iframe>
      <!-- If you prefer a placeholder until you have the URL, use the div below instead of the iframe above:
      <div class="panel-placeholder">
        <h2>Dashboard</h2>
        <p>Paste your dashboard embed URL in <code>index.html</code> (iframe with id="iframe-dashboard"). In Databricks: open the dashboard → Share → Embed dashboard.</p>
      </div>
      -->
    </section>

    <section id="panel-genie" class="panel">
      <!-- Replace the src below with your Genie space embed URL from Databricks:
           Open your Genie space → Share → Embed (if available). Otherwise use the Genie API for custom integration. -->
      <iframe
        id="iframe-genie"
        src="https://fe-sandbox-leticia-demo-automobilistic-1.cloud.databricks.com/genie/rooms/01f10ba1cf701a72be55d82980a77668?o=7474651027276549"
        
        title="Databricks Genie"
      ></iframe>
      <!-- If Genie embed URL is different or not yet available, use the placeholder:
      <div class="panel-placeholder">
        <h2>Genie</h2>
        <p>Paste your Genie embed URL in <code>index.html</code> (iframe with id="iframe-genie"). Get it from your Genie space → Share → Embed, or use the Genie Conversation API for a custom UI.</p>
      </div>
      -->
    </section>

    <section id="panel-motorista" class="panel">
      <div id="driver-view" class="driver-view">
        <div class="driver-view-header">
          <div class="driver-view-header-content">
            <h1>Visão do Motorista</h1>
            <p class="driver-view-sub">Status dos módulos do veículo</p>
            <div id="drive-safety-flag" class="drive-safety-flag" role="status" aria-live="polite">
              <span class="drive-safety-dot"></span>
              <span class="drive-safety-text">Carregando…</span>
            </div>
          </div>
          <button type="button" class="otto-trigger" id="otto-trigger" aria-label="Fala, Otto! Pergunte sobre seu carro">
            <span class="otto-trigger-icon"><img src="assets/otto-symbol.png" alt="Otto"></span>
            <span>Fala, Otto!</span>
          </button>
        </div>
        <div class="driver-view-body">
          <div class="car-section">
            <div class="car-container">
              <img src="assets/car-diagram.png" alt="Diagrama do veículo" class="car-image">
              <div id="car-points"></div>
            </div>
          </div>
          <div class="table-section">
            <div class="table-wrapper">
              <table class="alerts-table">
                <thead>
                  <tr>
                    <th>Status</th>
                    <th>Problema</th>
                    <th>Descrição</th>
                    <th>Solução</th>
                  </tr>
                </thead>
                <tbody id="alerts-tbody"></tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="history-section">
          <h2>Histórico do carro</h2>
          <div class="history-toolbar">
            <input type="text" class="history-search" id="history-search" placeholder="Pesquisar por data ou descrição" autocomplete="off">
            <div class="history-toolbar-right">
              <label for="history-page-size">Itens por página</label>
              <select id="history-page-size" aria-label="Quantidade por página">
                <option value="10" selected>10</option>
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
            </div>
          </div>
          <div class="history-list" id="history-list"></div>
          <div class="history-pagination" id="history-pagination"></div>
        </div>
      </div>
    </section>

    <section id="panel-pac" class="panel">
      <div class="panel-placeholder">
        <h2>Visão PAC</h2>
        <p>Conteúdo em breve.</p>
      </div>
    </section>

    <section id="panel-centralizada" class="panel">
      <div class="panel-placeholder">
        <h2>Visão Centralizada</h2>
        <p>Conteúdo em breve.</p>
      </div>
    </section>
  </main>

  <script src="js/app.js"></script>
  <script src="js/benefits.js"></script>
  <script src="js/databricks-genie.js"></script>
  <script src="js/otto-chat.js"></script>
  <script src="js/driver-view.js"></script>
  <script src="js/history.js"></script>
</body>
</html>
